{{ define "telegram.title" -}}
[{{ .Status | toUpper }}{{ if eq .Status "firing" }}:{{ .Alerts.Firing | len }}{{ end }}] {{ .GroupLabels.alertname }}
{{- end }}

{{ define "telegram.message" -}}
{{ if gt (len .Alerts.Firing) 0 -}}
ğŸ”¥ *FIRING ALERTS* ({{ .Alerts.Firing | len }})
{{ range .Alerts.Firing }}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸš¨ *{{ .Labels.alertname }}*
ğŸ“Š Severity: {{ .Labels.severity | toUpper }}
ğŸ”§ Service: {{ .Labels.service }}
â° Started: {{ .StartsAt.Format "2006-01-02 15:04:05 MST" }}

{{ if .Annotations.summary }}ğŸ“ {{ .Annotations.summary }}{{ end }}
{{ if .Annotations.description }}
ğŸ’¬ {{ .Annotations.description }}{{ end }}
{{ if .Labels.instance }}
ğŸ–¥ Instance: `{{ .Labels.instance }}`{{ end }}
{{ if .DashboardURL }}
ğŸ“Š [Dashboard]({{ .DashboardURL }}){{ end }}
{{ if .SilenceURL }}
ğŸ”‡ [Silence]({{ .SilenceURL }}){{ end }}
{{ end }}
{{- end }}

{{ if gt (len .Alerts.Resolved) 0 -}}
âœ… *RESOLVED ALERTS* ({{ .Alerts.Resolved | len }})
{{ range .Alerts.Resolved }}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ“ *{{ .Labels.alertname }}*
ğŸ“Š Severity: {{ .Labels.severity | toUpper }}
ğŸ”§ Service: {{ .Labels.service }}
â° Started: {{ .StartsAt.Format "2006-01-02 15:04:05 MST" }}
â± Duration: {{ (.EndsAt.Sub .StartsAt).Round 1000000000 }}

{{ if .Annotations.summary }}ğŸ“ {{ .Annotations.summary }}{{ end }}
{{ if .Labels.instance }}
ğŸ–¥ Instance: `{{ .Labels.instance }}`{{ end }}
{{ end }}
{{- end }}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”— [AlertManager]({{ .ExternalURL }})
{{- end }}
